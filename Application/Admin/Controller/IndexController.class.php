<?php/** * Created by PhpStorm. * User: wangsfox * Date: 2017/10/10 * Time: 18:39 */namespace Admin\Controller;use Think\Controller;class IndexController extends Controller{	protected $_Att;	 public function _initialize()    {        $this->_Att = M('user');    }    //列表    public function index(){    	$User = $this->_Att; // 实例化User对象		$count      = $User->where()->count();// 查询满足要求的总记录数		$Page       = new \Think\Page($count,10);// 实例化分页类 传入总记录数和每页显示的记录数(25)		$show       = $Page->show();// 分页显示输出		// 进行分页数据查询 注意limit方法的参数要使用Page类的属性		$list = $User->where()->order('loadtime desc')->limit($Page->firstRow.','.$Page->listRows)->select();		$this->assign('list',$list);// 赋值数据集		$this->assign('page',$show);// 赋值分页输出		$this->display(); // 输出模板    }    // 增加    public function add(){    	$this->display();	    }    //修改    public function edit(){    	$_id=I('id')?: $this->error('没有id')；    	$thisUser=$this->_Att->find($_id);    	if (I('submit')) {    		$data=[    			'username'=>I('username')?: $this->error('on username'),    			'phone'=>I('phone')?: $this->error('no phone'),    			'room'=>I('room')?: $this->error('no room'),    			'mettingaad'=>I('mettingaad')?: $this->error('no mettingaad'),    			'seatnum'=>I('seatnum')?: $this->error('no seatnum'),    			'groupnum'=>I('groupnum')?: $this->error('no groupnum'),    			'groupadd'=>I('groupadd')?: $this->error('no groupadd'),    			'th'=>I('th')?: $this->error('no th'),    			'fv'=>I('fv')?: $this->error('no fv'),    			'six'=>I('six')?: $this->error('no six'),    		]    		$isok=$this->_Att->add($data);    		if ($isok) {    			$this->success('添加成功'，U('index'));    		}else{    			$this->error('添加失败，请重试')；    		}    	}else{    	$this->assign('info',$thisUser);    	$this->display();    	}    }	    //删除    public function del(){    	$_id=I('id')?: $this->error('no id');    	$isok=$this->_Att->delete($_id);    	if ($isok) {    		$this->success('删除成功'，U('index'));	    }else{	    	$this->error('删除失败请重试')；	    }    }}